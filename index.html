<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MLA Practice: Quote + Paraphrase + Cite (2 Sources)</title>
  <style>
    :root{
      --bg: #f4f9ff;
      --bg2:#f6fff8;
      --card:#ffffff;

      --text:#1f2a44;
      --muted:#55657f;

      --line:#dbe7f5;

      --blue:#4f8cff;
      --mint:#46c6a7;
      --sun:#ffd36e;
      --pink:#ff9bb2;

      --good:#1a9b4a;
      --warn:#c77900;
      --bad:#cc2b2b;

      --shadow: 0 10px 24px rgba(31,42,68,.10);
      --radius: 18px;

      --focus: 0 0 0 4px rgba(79,140,255,.25);
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(79,140,255,.14), transparent 60%),
        radial-gradient(900px 500px at 90% 0%, rgba(70,198,167,.14), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
    }

    .wrap{max-width:900px; margin:0 auto; padding:18px 14px 42px}

    header{
      background: rgba(255,255,255,.75);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      backdrop-filter: blur(8px);
    }

    h1{ margin:0 0 8px; font-size: 22px; letter-spacing:.2px; }

    .lead{
      margin:0;
      color:var(--muted);
      line-height:1.5;
      font-size:14px;
    }

    .pillrow{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:12px;
    }
    .pill{
      background: rgba(255,255,255,.9);
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px 10px;
      font-size:13px;
      color:var(--muted);
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .dot{width:10px;height:10px;border-radius:999px;background:var(--sun)}
    .dot.blue{background:var(--blue)}
    .dot.mint{background:var(--mint)}
    .dot.pink{background:var(--pink)}

    .progressbox{
      margin-top: 12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      border-radius: 14px;
      background: rgba(255,255,255,.85);
    }
    .progresstop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      color:var(--muted);
      font-size:13px;
      margin-bottom:8px;
    }
    .bar{
      width:100%;
      height:10px;
      border-radius:999px;
      background: rgba(31,42,68,.08);
      overflow:hidden;
    }
    .bar > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--blue), var(--mint));
      border-radius:999px;
      transition: width .25s ease;
    }

    .card{
      margin-top:14px;
      background: rgba(255,255,255,.85);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      backdrop-filter: blur(8px);
    }

    h2{ margin:0 0 6px; font-size:18px; }
    .sub{
      margin:0 0 12px;
      color:var(--muted);
      line-height:1.5;
      font-size:14px;
    }

    a{color:var(--blue); text-decoration:none}
    a:hover{text-decoration:underline}

    .sources{
      margin: 10px 0 0;
      padding-left: 18px;
      color: var(--muted);
    }
    .sources li{margin:10px 0}

    label{
      display:block;
      margin: 10px 0 6px;
      font-size: 13px;
      font-weight: 800;
      color: var(--muted);
    }

    textarea, input, select{
      width:100%;
      border:1px solid var(--line);
      border-radius: 14px;
      background:#fff;
      color: var(--text);
      padding: 12px 12px;
      font-size: 15px;
      line-height: 1.55;
      outline:none;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    textarea{min-height:110px; resize:vertical}

    textarea:focus, input:focus, select:focus, button:focus{
      box-shadow: var(--focus);
      border-color: rgba(79,140,255,.55);
    }

    .row{ display:grid; gap:10px; grid-template-columns: 1fr; }
    @media (min-width: 820px){
      .row.two{grid-template-columns: 1fr 1fr;}
    }

    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 12px;
    }
    button{
      border:0;
      border-radius: 14px;
      padding: 11px 14px;
      font-weight: 900;
      cursor:pointer;
      color:#fff;
      background: linear-gradient(135deg, var(--blue), var(--mint));
      box-shadow: 0 10px 18px rgba(79,140,255,.18);
      transition: transform .08s ease, filter .2s ease;
    }
    button:hover{filter: brightness(1.03)}
    button:active{transform: translateY(1px)}
    button.secondary{
      background: rgba(31,42,68,.72);
      box-shadow: 0 10px 18px rgba(31,42,68,.14);
    }
    button.ghost{
      background: rgba(255,255,255,.95);
      color: var(--text);
      border: 1px solid var(--line);
      box-shadow:none;
    }

    .statusrow{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 10px; }
    .badge{
      background: rgba(255,255,255,.95);
      border:1px solid var(--line);
      border-radius:999px;
      padding: 7px 10px;
      font-size: 13px;
      color: var(--muted);
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .smalldot{width:10px;height:10px;border-radius:999px;background:var(--sun)}
    .smalldot.good{background: var(--good)}
    .smalldot.warn{background: var(--warn)}
    .smalldot.bad{background: var(--bad)}

    .checklist{
      margin: 10px 0 0;
      padding-left: 18px;
      color: var(--muted);
    }
    .checklist li{margin: 8px 0}
    .ok{color: var(--good); font-weight: 900}
    .warn{color: var(--warn); font-weight: 900}
    .no{color: var(--bad); font-weight: 900}

    .hide{display:none !important}

    .box{
      border:1px solid var(--line);
      background: rgba(255,255,255,.9);
      border-radius: 14px;
      padding: 12px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.55;
    }
    .minihead{ font-weight: 900; color: var(--text); margin-bottom: 6px; }

    .taller{ min-height: 320px; }
    .wcTall{ min-height: 190px; }

    .reading{
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      font-size: 16px;
      line-height: 1.65;
    }

    .err{
      border:1px solid rgba(204,43,43,.35);
      background: rgba(204,43,43,.08);
      color: #8a1f1f;
      border-radius: 14px;
      padding: 12px;
      margin-top: 12px;
      display:none;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>MLA Practice: Quote + Paraphrase + Cite (2 Sources)</h1>
      <p class="lead">
        You will first walk through an <strong>example</strong>, then you will write your <strong>own paragraph</strong>.
        You only see one page at a time.
      </p>

      <div class="pillrow">
        <span class="pill"><span class="dot blue"></span>1 quote</span>
        <span class="pill"><span class="dot mint"></span>2 paraphrases</span>
        <span class="pill"><span class="dot"></span>3 citations</span>
        <span class="pill"><span class="dot pink"></span>Works Cited</span>
      </div>

      <div class="progressbox">
        <div class="progresstop">
          <span id="stepLabel">Page 1 of 6</span>
          <span id="stepTitle">Start here</span>
        </div>
        <div class="bar"><div id="barFill"></div></div>
      </div>

      <div class="err" id="errBox">
        Something on this page did not load correctly. If buttons are not working, your browser is likely seeing a small code error.
        Try a hard refresh (Shift + Reload). If it still happens, tell your instructor.
      </div>
    </header>

    <!-- PAGE 1 -->
    <section class="card" id="p1">
      <h2>Page 1: What you are doing</h2>
      <p class="sub">
        You will write one paragraph (8–10 sentences) using information from sources.
        You will practice quoting, paraphrasing, and citing.
      </p>

      <div class="box">
        <div class="minihead">Non-negotiable rule</div>
        If you learned it from a source, you must cite it (even if you paraphrase).
      </div>

      <ul class="checklist">
        <li>1 direct quote (with quotation marks)</li>
        <li>2 paraphrases (one from each source)</li>
        <li>3 in-text citations total (one after each quote/paraphrase)</li>
        <li>A Works Cited that matches</li>
      </ul>

      <div class="btnrow">
        <button id="toP2">Start the example (EMT)</button>
      </div>
    </section>

    <!-- PAGE 2 -->
    <section class="card hide" id="p2">
      <h2>Page 2: Example (EMT) — open the 2 sources</h2>
      <p class="sub">
        Click each link. Skim for job duties, work conditions, and licensing rules.
      </p>

      <ol class="sources">
        <li>
          <strong>Example Source 1 (BLS)</strong><br />
          <a target="_blank" rel="noopener"
             href="https://www.bls.gov/ooh/healthcare/emts-and-paramedics.htm">
            EMTs and Paramedics — Occupational Outlook Handbook
          </a>
        </li>

        <li>
          <strong>Example Source 2 (CareerOneStop — License, WA)</strong><br />
          <a target="_blank" rel="noopener"
             href="https://www.careeronestop.org/Toolkit/Training/find-licenses-detail.aspx?keyword=emt&location=WA&lang=en&licenseId=53-L48">
            Emergency Medical Technician (WA) — license details
          </a>
        </li>
      </ol>

      <div class="btnrow">
        <button class="ghost" id="backP2">Back</button>
        <button id="toP3">Next: Read the model paragraph</button>
      </div>
    </section>

    <!-- PAGE 3 -->
    <section class="card hide" id="p3">
      <h2>Page 3: Example (EMT) — model paragraph</h2>
      <p class="sub">
        Read this once. Notice how each quote or paraphrase ends with a citation in parentheses.
      </p>

      <label for="modelPara">Model paragraph (example)</label>
      <textarea id="modelPara" class="reading" readonly>Being an EMT or paramedic means dealing with emergencies and helping people right away. The Bureau of Labor Statistics says EMTs and paramedics “provide emergency medical care” and sometimes also transport patients to medical facilities (Bureau of Labor Statistics). The BLS also explains that the job can be stressful and physically hard, and that workers may have to work nights, weekends, and holidays (Bureau of Labor Statistics). To enter this field, people usually need training after high school, and every state requires EMTs and paramedics to be licensed (Bureau of Labor Statistics). In Washington, the CareerOneStop license page explains that EMTs need the correct state credential and must meet state requirements to earn and keep that credential active (CareerOneStop). Together, these sources show that becoming an EMT is not just about wanting to help people; you also need training and the right licensing steps to qualify for the work.</textarea>

      <div class="box" style="margin-top:12px;">
        <div class="minihead">Simple MLA in-text citations for these web sources</div>
        Use the organization name in parentheses:
        <ul class="checklist">
          <li>BLS: <span>(Bureau of Labor Statistics)</span></li>
          <li>CareerOneStop: <span>(CareerOneStop)</span></li>
        </ul>
        Rule: what you put in parentheses should match your Works Cited.
      </div>

      <label for="modelWC">Example Works Cited (copyable)</label>
      <textarea id="modelWC" class="wcTall" readonly></textarea>

      <div class="btnrow">
        <button class="ghost" id="backP3">Back</button>
        <button id="toP4">Next: Your turn (Professor sources)</button>
      </div>
    </section>

    <!-- PAGE 4 -->
    <section class="card hide" id="p4">
      <h2>Page 4: Your turn — open the 2 sources</h2>
      <p class="sub">
        Your goal: write one paragraph (8–10 sentences) explaining what these sources show about:
        <strong>the postsecondary teacher role/work conditions</strong> and <strong>certification expectations</strong>.
      </p>

      <div class="box">
        <div class="minihead">You must include</div>
        <ul class="checklist">
          <li>1 direct quote (with quotation marks)</li>
          <li>2 paraphrases (one from each source)</li>
          <li>3 in-text citations total (one after each quote/paraphrase)</li>
          <li>A matching Works Cited</li>
        </ul>
      </div>

      <ol class="sources">
        <li>
          <strong>Source 1 (BLS)</strong><br />
          <a target="_blank" rel="noopener"
             href="https://www.bls.gov/ooh/education-training-and-library/postsecondary-teachers.htm">
            Postsecondary Teachers — Occupational Outlook Handbook
          </a>
        </li>

        <li>
          <strong>Source 2 (CareerOneStop — Certification)</strong><br />
          <a target="_blank" rel="noopener"
             href="https://www.careeronestop.org/Toolkit/Training/find-certifications.aspx?keyword=post%20secondary&ajax=0&direct=0&lang=en&certid=13771-A">
            Certified Postsecondary Instructor (CPI)
          </a>
        </li>
      </ol>

      <div class="btnrow">
        <button class="ghost" id="backP4">Back</button>
        <button id="toP5">Next: Build your paragraph (sentence boxes)</button>
      </div>
    </section>

    <!-- PAGE 5 -->
    <section class="card hide" id="p5">
      <h2>Page 5: Build your paragraph (sentence boxes)</h2>
      <p class="sub">
        Fill in <strong>Sentences 1–8</strong> (required). Sentences 9–10 are optional.
        You will add citations in parentheses in the correct sentences.
      </p>

      <div class="box" style="margin-bottom:12px;">
        <div class="minihead">Where citations go</div>
        <ul class="checklist">
          <li><strong>Sentence 2</strong> = quote + citation</li>
          <li><strong>Sentence 4</strong> = paraphrase from BLS + citation</li>
          <li><strong>Sentence 6</strong> = paraphrase from CareerOneStop + citation</li>
        </ul>
        Citation examples: (Bureau of Labor Statistics) / (CareerOneStop)
      </div>

      <label for="s1">Sentence 1 (topic sentence)</label>
      <textarea id="s1" placeholder="Example: These sources show what postsecondary teachers do and what qualifications can matter for this career."></textarea>

      <label for="s2">Sentence 2 (DIRECT QUOTE + citation)</label>
      <textarea id="s2" placeholder='Paste a quote with quotation marks, then add a citation. Example: “...” (Bureau of Labor Statistics)'></textarea>

      <label for="s3">Sentence 3 (explain the quote)</label>
      <textarea id="s3" placeholder="Starter: This shows that... / In other words..."></textarea>

      <label for="s4">Sentence 4 (PARAPHRASE from BLS + citation)</label>
      <textarea id="s4" placeholder="Put a BLS idea in your own words, then add (Bureau of Labor Statistics)."></textarea>

      <label for="s5">Sentence 5 (why that BLS info matters)</label>
      <textarea id="s5" placeholder="Starter: This matters because... / Because of this..."></textarea>

      <label for="s6">Sentence 6 (PARAPHRASE from CareerOneStop CPI + citation)</label>
      <textarea id="s6" placeholder="Put a CareerOneStop CPI idea in your own words, then add (CareerOneStop)."></textarea>

      <label for="s7">Sentence 7 (why that certification info matters)</label>
      <textarea id="s7" placeholder="Starter: This matters because... / Another important point is..."></textarea>

      <label for="s8">Sentence 8 (wrap-up: connect both sources)</label>
      <textarea id="s8" placeholder="Starter: Overall... / Together, these sources suggest..."></textarea>

      <label for="s9">Sentence 9 (optional)</label>
      <textarea id="s9" placeholder="Optional extra sentence if you want 9–10 total."></textarea>

      <label for="s10">Sentence 10 (optional)</label>
      <textarea id="s10" placeholder="Optional extra sentence if you want 9–10 total."></textarea>

      <div class="statusrow">
        <div class="badge">
          <span class="smalldot" id="evidenceDot"></span>
          <span id="evidenceStatus">Ready check: not ready yet</span>
        </div>
      </div>

      <div class="btnrow">
        <button class="ghost" id="backP5">Back</button>
        <button id="buildBtn">Build my paragraph</button>
        <button class="secondary" id="toP6">Next: Final copy + checklist</button>
      </div>
    </section>

    <!-- PAGE 6 -->
    <section class="card hide" id="p6">
      <h2>Page 6: Final copy box</h2>
      <p class="sub">
        Click “Build my paragraph” if you have not yet. Then copy your paragraph and Works Cited.
      </p>

      <label for="finalPara">Your paragraph (you can edit it)</label>
      <textarea id="finalPara" class="taller" placeholder="Click “Build my paragraph” to generate."></textarea>

      <div class="statusrow">
        <div class="badge"><span class="smalldot" id="sentDot"></span><span id="sentStatus">Sentences: 0 (goal 8–10)</span></div>
        <div class="badge"><span class="smalldot" id="citeDot"></span><span id="citeStatus">Citations: 0/3 minimum</span></div>
      </div>

      <div class="row two" style="margin-top:12px;">
        <div>
          <label for="accessDate">Access date (auto-filled)</label>
          <input id="accessDate" />
        </div>
        <div>
          <label for="studentName">Your name (optional)</label>
          <input id="studentName" placeholder="Name" />
        </div>
      </div>

      <label for="wcBlock">Works Cited (copy this too)</label>
      <textarea id="wcBlock" class="wcTall" placeholder="Click “Build Works Cited”"></textarea>

      <div class="btnrow">
        <button id="buildWCBtn">Build Works Cited</button>
        <button class="secondary" id="copyWCBtn">Copy Works Cited</button>
      </div>

      <label for="finalCopy">FINAL COPY (paragraph + Works Cited together)</label>
      <textarea id="finalCopy" class="taller" placeholder="Click “Build FINAL copy”"></textarea>

      <div class="btnrow">
        <button id="buildFinalBtn">Build FINAL copy</button>
        <button class="secondary" id="copyFinalBtn">Copy FINAL copy</button>
        <button class="ghost" id="backP6">Back</button>
      </div>

      <h2 style="margin-top:14px;">Checklist</h2>
      <ul class="checklist" id="checklist">
        <li>Has a quote with quotation marks <span id="chkQuote" class="warn">(not checked yet)</span></li>
        <li>Has 2 paraphrases <span id="chkParas" class="warn">(not checked yet)</span></li>
        <li>Has 3+ citations <span id="chkCites" class="warn">(not checked yet)</span></li>
        <li>Has 8–10 sentences <span id="chkSents" class="warn">(not checked yet)</span></li>
        <li>Has a Works Cited block <span id="chkWC" class="warn">(not checked yet)</span></li>
      </ul>

      <div class="btnrow">
        <button class="secondary" id="checkBtn">Check basics</button>
      </div>
    </section>

  </div>

  <script>
    // ---------- Crash-proof / Safari-safe JS ----------
    function $(id){ return document.getElementById(id); }

    function on(id, evt, fn){
      var el = $(id);
      if (el) el.addEventListener(evt, fn);
    }

    function val(id){
      var el = $(id);
      return el ? (el.value || "") : "";
    }

    function setText(id, txt){
      var el = $(id);
      if (el) el.textContent = txt;
    }

    function setValue(id, txt){
      var el = $(id);
      if (el) el.value = txt;
    }

    function todayUS(){
      var d = new Date();
      var months = ["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."];
      return d.getDate() + " " + months[d.getMonth()] + " " + d.getFullYear();
    }

    function countSentences(text){
      var cleaned = (text || "").replace(/\s+/g, " ").trim();
      if (!cleaned) return 0;
      var matches = cleaned.match(/[.!?]+/g);
      var count = matches ? matches.length : 0;
      if (count === 0 && cleaned.length > 0) return 1;
      return count;
    }

    function countCitations(text){
      var m = (text || "").match(/\([^)]+\)/g);
      return m ? m.length : 0;
    }

    function setDot(id, state){
      var el = $(id);
      if (!el) return;
      el.classList.remove("good","warn","bad");
      if (state) el.classList.add(state);
    }

    function hasParenCitation(text){
      return /\([^)]+\)/.test((text || ""));
    }

    function hasQuoteMarks(text){
      var t = (text || "");
      return (t.indexOf("“") !== -1) || (t.indexOf("”") !== -1) || (t.indexOf("\"") !== -1);
    }

    function ensureEndPunct(sentence){
      var s = (sentence || "").trim();
      if (!s) return "";
      if (/[.!?]$/.test(s)) return s;
      return s + ".";
    }

    var pages = [
      {id:"p1", label:"Page 1 of 6", title:"Start here", pct: 5},
      {id:"p2", label:"Page 2 of 6", title:"Example sources (EMT)", pct: 20},
      {id:"p3", label:"Page 3 of 6", title:"Example model paragraph", pct: 35},
      {id:"p4", label:"Page 4 of 6", title:"Your sources (Professor)", pct: 55},
      {id:"p5", label:"Page 5 of 6", title:"Build your paragraph", pct: 75},
      {id:"p6", label:"Page 6 of 6", title:"Final copy + checklist", pct: 100}
    ];

    function showPage(n){
      for (var i=0; i<pages.length; i++){
        var el = $(pages[i].id);
        if (el) el.classList.toggle("hide", i !== n);
      }
      setText("stepLabel", pages[n].label);
      setText("stepTitle", pages[n].title);
      var bar = $("barFill");
      if (bar) bar.style.width = pages[n].pct + "%";
      try { window.scrollTo(0, 0); } catch(e) {}
    }

    function updateEvidenceStatus(){
      // Required sentence boxes 1–8
      var s1 = val("s1").trim();
      var s2 = val("s2").trim();
      var s3 = val("s3").trim();
      var s4 = val("s4").trim();
      var s5 = val("s5").trim();
      var s6 = val("s6").trim();
      var s7 = val("s7").trim();
      var s8 = val("s8").trim();

      var allFilled = (s1 && s2 && s3 && s4 && s5 && s6 && s7 && s8);

      // Quote sentence needs quote marks + citation
      var quoteOK = s2 && hasQuoteMarks(s2) && hasParenCitation(s2);

      // Paraphrase sentences need citations
      var p1OK = s4 && hasParenCitation(s4);
      var p2OK = s6 && hasParenCitation(s6);

      var ok = allFilled && quoteOK && p1OK && p2OK;

      if (!allFilled){
        setText("evidenceStatus", "Ready check: fill Sentences 1–8");
        setDot("evidenceDot", "warn");
        return;
      }
      if (!quoteOK){
        setText("evidenceStatus", "Ready check: Sentence 2 needs quote marks + a citation");
        setDot("evidenceDot", "warn");
        return;
      }
      if (!p1OK || !p2OK){
        setText("evidenceStatus", "Ready check: Sentences 4 and 6 need citations in parentheses");
        setDot("evidenceDot", "warn");
        return;
      }

      setText("evidenceStatus", "Ready check: ready");
      setDot("evidenceDot", "good");
    }

    function updateBadges(){
      var text = val("finalPara");
      var sentCount = countSentences(text);
      var citeCount = countCitations(text);

      setText("sentStatus", "Sentences: " + sentCount + " (goal 8–10)");
      setText("citeStatus", "Citations: " + citeCount + "/3 minimum");

      if (sentCount === 0) setDot("sentDot", "warn");
      else if (sentCount >= 8 && sentCount <= 10) setDot("sentDot", "good");
      else setDot("sentDot", "bad");

      if (citeCount === 0) setDot("citeDot", "warn");
      else if (citeCount >= 3) setDot("citeDot", "good");
      else setDot("citeDot", "bad");
    }

    function buildModelWorksCited(){
      var access = val("accessDate").trim() || todayUS();

      var mwc1 =
        "Bureau of Labor Statistics. “EMTs and Paramedics.” Occupational Outlook Handbook, U.S. Bureau of Labor Statistics, https://www.bls.gov/ooh/healthcare/emts-and-paramedics.htm. Accessed " + access + ".";

      var mwc2 =
        "CareerOneStop. “Emergency Medical Technician (WA).” License Finder, CareerOneStop, https://www.careeronestop.org/Toolkit/Training/find-licenses-detail.aspx?keyword=emt&location=WA&lang=en&licenseId=53-L48. Accessed " + access + ".";

      setValue("modelWC", mwc1 + "\n" + mwc2);
    }

    function buildWorksCitedDefaults(){
      var access = val("accessDate").trim() || todayUS();

      var wc1 =
        "Bureau of Labor Statistics. “Postsecondary Teachers.” Occupational Outlook Handbook, U.S. Bureau of Labor Statistics, https://www.bls.gov/ooh/education-training-and-library/postsecondary-teachers.htm. Accessed " + access + ".";

      var wc2 =
        "CareerOneStop. “Certified Postsecondary Instructor (CPI).” Certification Finder, CareerOneStop, https://www.careeronestop.org/Toolkit/Training/find-certifications.aspx?keyword=post%20secondary&ajax=0&direct=0&lang=en&certid=13771-A. Accessed " + access + ".";

      setValue("wcBlock", wc1 + "\n" + wc2);
    }

    function buildFinalCopy(){
      var para = val("finalPara").trim();
      var wc = val("wcBlock").trim();
      var block = para + "\n\nWorks Cited\n" + wc;
      setValue("finalCopy", block.trim());
    }

    function buildDraftParagraph(){
      // Build from sentence boxes
      var parts = [];
      var ids = ["s1","s2","s3","s4","s5","s6","s7","s8","s9","s10"];
      for (var i=0; i<ids.length; i++){
        var t = val(ids[i]).trim();
        if (t) parts.push(ensureEndPunct(t));
      }

      var draft = parts.join(" ")
        .replace(/\s+\./g, ".")
        .replace(/\.\./g, ".")
        .replace(/\s{2,}/g, " ")
        .trim();

      setValue("finalPara", draft);
      buildWorksCitedDefaults();
      updateBadges();
      buildFinalCopy();
      showPage(5);
    }

    function fallbackCopy(value){
      var tmp = document.createElement("textarea");
      tmp.value = value;
      document.body.appendChild(tmp);
      tmp.select();
      try { document.execCommand("copy"); } catch(e) {}
      document.body.removeChild(tmp);
      alert("Copied!");
    }

    function copyToClipboard(value){
      if (navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(value).then(function(){
          alert("Copied!");
        }).catch(function(){
          fallbackCopy(value);
        });
      } else {
        fallbackCopy(value);
      }
    }

    function runChecklist(){
      var s2 = val("s2").trim();
      var s4 = val("s4").trim();
      var s6 = val("s6").trim();

      var paraText = val("finalPara").trim();
      var wc = val("wcBlock").trim();

      var hasQuote = s2.length > 0 && hasQuoteMarks(s2);
      var hasParas = (s4.length > 0 && s6.length > 0);

      var cites = countCitations(paraText);
      var hasCites = cites >= 3;

      var sentCount = countSentences(paraText);
      var hasSentRange = sentCount >= 8 && sentCount <= 10;

      var hasWC = wc.length > 0;

      var q = $("chkQuote"), pa = $("chkParas"), ci = $("chkCites"), se = $("chkSents"), w = $("chkWC");
      if (q){ q.textContent = hasQuote ? "(ok)" : "(add quotation marks)"; q.className = hasQuote ? "ok" : "no"; }
      if (pa){ pa.textContent = hasParas ? "(ok)" : "(need 2 paraphrases)"; pa.className = hasParas ? "ok" : "no"; }
      if (ci){ ci.textContent = hasCites ? "(ok)" : "(need 3+; you have " + cites + ")"; ci.className = hasCites ? "ok" : "no"; }
      if (se){ se.textContent = hasSentRange ? "(ok)" : "(goal 8–10; you have " + sentCount + ")"; se.className = hasSentRange ? "ok" : "no"; }
      if (w){ w.textContent = hasWC ? "(ok)" : "(click Build Works Cited)"; w.className = hasWC ? "ok" : "no"; }

      updateBadges();
      buildFinalCopy();
    }

    // ---------- Bind buttons safely ----------
    on("toP2","click", function(){ showPage(1); });
    on("toP3","click", function(){ showPage(2); });
    on("toP4","click", function(){ showPage(3); });
    on("toP5","click", function(){ showPage(4); });
    on("toP6","click", function(){ showPage(5); });

    on("backP2","click", function(){ showPage(0); });
    on("backP3","click", function(){ showPage(1); });
    on("backP4","click", function(){ showPage(2); });
    on("backP5","click", function(){ showPage(3); });
    on("backP6","click", function(){ showPage(4); });

    on("buildBtn","click", buildDraftParagraph);

    on("buildWCBtn","click", function(){
      buildWorksCitedDefaults();
      buildFinalCopy();
      alert("Works Cited built!");
    });

    on("copyWCBtn","click", function(){ copyToClipboard(val("wcBlock")); });

    on("buildFinalBtn","click", function(){
      buildFinalCopy();
      alert("FINAL copy built!");
    });

    on("copyFinalBtn","click", function(){ copyToClipboard(val("finalCopy")); });

    on("checkBtn","click", runChecklist);

    on("finalPara","input", function(){
      updateBadges();
      buildFinalCopy();
    });

    // Live readiness checks for sentence boxes
    var liveIds = ["s1","s2","s3","s4","s5","s6","s7","s8","s9","s10"];
    for (var i=0; i<liveIds.length; i++){
      (function(id){
        on(id, "input", updateEvidenceStatus);
        on(id, "change", updateEvidenceStatus);
      })(liveIds[i]);
    }

    // ---------- Init with error safety ----------
    try{
      if ($("accessDate")) $("accessDate").value = todayUS();
      buildModelWorksCited();
      buildWorksCitedDefaults();
      updateEvidenceStatus();
      updateBadges();
      buildFinalCopy();
      showPage(0);
    } catch(e){
      if ($("errBox")) $("errBox").style.display = "block";
      try{ showPage(0); } catch(err) {}
    }
  </script>
</body>
</html>
